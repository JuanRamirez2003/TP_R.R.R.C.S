<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pedidos de Materia Prima - Gerente</title>
    <link rel="stylesheet" href="css/ventas.css">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body>
    <div class="dashboard">
        <!-- Sidebar -->
<aside class="sidebar">
    <h2>Pedidos de Materia Prima</h2>
    <ul>
        <li><button onclick="mostrarSeccion('pedidoMP')">Crear Pedido</button></li>
        <li><button onclick="mostrarSeccion('vistaPedidos')">Ver Pedidos</button></li>
        <!-- Botón para volver al panel de Supervisor -->
        <li>
            <button 
                class="btn-submit" 
                style="background-color:#007bff; color:white; border:none; border-radius:6px; padding:10px 15px; cursor:pointer;"
                onclick="window.location.href='supervisor.html'">
                 Volver al Panel Supervisor
            </button>
        </li>
        <li>
            <button class="btn-logout" onclick="cerrarSesion()">Cerrar sesión</button>
        </li>
    </ul>
</aside>

        <!-- Contenido principal -->
        <main class="main-content">
            <h1>Pedidos de Materiales</h1>

            <!-- Sección Crear Pedido -->
            <div id="pedidoMP" class="seccion" style="display:none;">
                <form id="pedidoForm">
                    <div class="form-group">
                        <label for="materialSelect">Material:</label>
                        <select id="materialSelect" required>
                            <option value="">Seleccione...</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="proveedorSelect">Proveedor:</label>
                        <select id="proveedorSelect" required>
                            <option value="">Seleccione un material primero</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="cantidad">Cantidad:</label>
                        <input type="number" id="cantidad" required min="1" step="1">
                    </div>

                    <button type="submit" class="btn-submit">Enviar Pedido</button>
                </form>

                <div id="mensajeExito" class="mensaje exito">Pedido enviado correctamente.</div>
                <div id="mensajeError" class="mensaje error"></div>
            </div>

            <!-- Sección Ver Pedidos -->
            <div id="vistaPedidos" class="seccion" style="display:none;">
                <h2>Pedidos Registrados</h2>
                <div class="table-wrapper">
                    <table id="tablaPedidos">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Material</th>
                                <th>Proveedor</th>
                                <th>Cantidad</th>
                                <th>Estado</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
            </div>
        </main>
    </div>
    <!-- Cargar EmailJS v3 en navegador -->
<script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
<script>
  // Inicializar EmailJS
  emailjs.init("SJ34lI1ytF8WPEMSi"); // Tu public key
</script>

<script src="js/supervisor_oc.js"></script> 
    <script>
        function cerrarSesion() {
            localStorage.clear();
            sessionStorage.clear();
            window.location.href = "index.html";
        }

        function mostrarSeccion(id) {
            document.querySelectorAll('.seccion').forEach(sec => sec.style.display = 'none');
            document.getElementById(id).style.display = 'block';
        }

        document.addEventListener('DOMContentLoaded', () => {
            mostrarSeccion('pedidoMP'); // Mostrar sección inicial
        });
    </script>
</body>
</html>